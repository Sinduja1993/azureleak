<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AzureLeak ‚Äî Find Your Wasted Azure Money</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;700;800&display=swap');

  :root {
    --azure: #0078D4;
    --azure-light: #50E6FF;
    --danger: #FF3B3B;
    --warn: #FFB800;
    --ok: #00C851;
    --bg: #050A12;
    --surface: #0D1825;
    --surface2: #122030;
    --border: #1E3A52;
    --text: #E8F4FD;
    --muted: #6B8FAD;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Syne', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Grid background */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: 
      linear-gradient(rgba(0,120,212,0.04) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,120,212,0.04) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  .glow-orb {
    position: fixed;
    width: 600px;
    height: 600px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(0,120,212,0.12) 0%, transparent 70%);
    top: -200px;
    right: -200px;
    pointer-events: none;
    z-index: 0;
  }

  .container {
    max-width: 960px;
    margin: 0 auto;
    padding: 0 24px;
    position: relative;
    z-index: 1;
  }

  /* Header */
  header {
    padding: 36px 0 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .logo-icon {
    width: 36px;
    height: 36px;
    background: var(--azure);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
  }

  .logo-text {
    font-size: 22px;
    font-weight: 800;
    letter-spacing: -0.5px;
  }

  .logo-text span { color: var(--azure-light); }

  .badge {
    background: rgba(0,120,212,0.15);
    border: 1px solid rgba(0,120,212,0.4);
    color: var(--azure-light);
    padding: 4px 14px;
    border-radius: 100px;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    font-family: 'Space Mono', monospace;
  }

  /* Hero */
  .hero {
    padding: 40px 0 32px;
    text-align: center;
  }

  .hero-label {
    display: inline-block;
    background: rgba(255,59,59,0.1);
    border: 1px solid rgba(255,59,59,0.3);
    color: #FF7070;
    padding: 5px 16px;
    border-radius: 4px;
    font-size: 12px;
    font-family: 'Space Mono', monospace;
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-bottom: 20px;
    animation: pulse-red 2s ease-in-out infinite;
  }

  @keyframes pulse-red {
    0%, 100% { box-shadow: 0 0 0 0 rgba(255,59,59,0.3); }
    50% { box-shadow: 0 0 0 8px rgba(255,59,59,0); }
  }

  .hero h1 {
    font-size: clamp(36px, 6vw, 62px);
    font-weight: 800;
    line-height: 1.05;
    letter-spacing: -2px;
    margin-bottom: 16px;
  }

  .hero h1 .highlight {
    background: linear-gradient(135deg, #FF3B3B, #FFB800);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .hero p {
    color: var(--muted);
    font-size: 17px;
    max-width: 520px;
    margin: 0 auto 32px;
    line-height: 1.6;
    font-weight: 400;
  }

  .stat-row {
    display: flex;
    gap: 16px;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 40px;
  }

  .stat {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px 24px;
    text-align: center;
  }

  .stat-num {
    font-size: 26px;
    font-weight: 800;
    font-family: 'Space Mono', monospace;
    color: var(--azure-light);
  }

  .stat-label {
    font-size: 12px;
    color: var(--muted);
    margin-top: 2px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* Main tool area */
  .tool-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    overflow: hidden;
    margin-bottom: 32px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
  }

  .tool-tabs {
    display: flex;
    border-bottom: 1px solid var(--border);
    background: var(--bg);
  }

  .tab-btn {
    flex: 1;
    padding: 14px;
    background: transparent;
    border: none;
    color: var(--muted);
    font-family: 'Syne', sans-serif;
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    text-transform: uppercase;
    letter-spacing: 1px;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
  }

  .tab-btn.active {
    color: var(--azure-light);
    border-bottom-color: var(--azure-light);
  }

  .tab-content { display: none; padding: 28px; }
  .tab-content.active { display: block; }

  .section-label {
    font-size: 12px;
    font-family: 'Space Mono', monospace;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 10px;
  }

  textarea {
    width: 100%;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 10px;
    color: var(--text);
    font-family: 'Space Mono', monospace;
    font-size: 12px;
    padding: 16px;
    resize: vertical;
    min-height: 200px;
    outline: none;
    transition: border-color 0.2s;
    line-height: 1.6;
  }

  textarea:focus { border-color: var(--azure); }
  textarea::placeholder { color: var(--muted); }

  .manual-form { display: flex; flex-direction: column; gap: 16px; }

  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }

  .form-group { display: flex; flex-direction: column; gap: 6px; }

  .form-group label {
    font-size: 12px;
    font-weight: 700;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .form-group input, .form-group select {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text);
    font-family: 'Syne', sans-serif;
    font-size: 14px;
    padding: 10px 14px;
    outline: none;
    transition: border-color 0.2s;
  }

  .form-group input:focus, .form-group select:focus { border-color: var(--azure); }

  .form-group select option { background: var(--bg); }

  .add-resource-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(0,120,212,0.1);
    border: 1px dashed rgba(0,120,212,0.4);
    color: var(--azure-light);
    padding: 10px 20px;
    border-radius: 8px;
    font-family: 'Syne', sans-serif;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    width: 100%;
    justify-content: center;
  }

  .add-resource-btn:hover { background: rgba(0,120,212,0.2); }

  .resources-list { margin-top: 12px; display: flex; flex-direction: column; gap: 8px; }

  .resource-item {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 12px 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    animation: slideIn 0.2s ease;
  }

  @keyframes slideIn {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .resource-info { display: flex; flex-direction: column; gap: 2px; }
  .resource-name { font-size: 14px; font-weight: 700; }
  .resource-meta { font-size: 11px; font-family: 'Space Mono', monospace; color: var(--muted); }

  .resource-cost {
    font-family: 'Space Mono', monospace;
    font-size: 14px;
    font-weight: 700;
    color: var(--warn);
  }

  .remove-btn {
    background: none;
    border: none;
    color: var(--muted);
    cursor: pointer;
    padding: 4px 8px;
    font-size: 16px;
    transition: color 0.2s;
    margin-left: 12px;
  }
  .remove-btn:hover { color: var(--danger); }

  .analyze-btn {
    display: block;
    width: 100%;
    padding: 18px;
    background: linear-gradient(135deg, var(--azure), #005A9E);
    border: none;
    border-radius: 12px;
    color: white;
    font-family: 'Syne', sans-serif;
    font-size: 16px;
    font-weight: 800;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: all 0.2s;
    margin-top: 20px;
    text-transform: uppercase;
    position: relative;
    overflow: hidden;
  }

  .analyze-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(255,255,255,0.1), transparent);
    opacity: 0;
    transition: opacity 0.2s;
  }

  .analyze-btn:hover::before { opacity: 1; }
  .analyze-btn:hover { transform: translateY(-1px); box-shadow: 0 8px 30px rgba(0,120,212,0.4); }
  .analyze-btn:active { transform: translateY(0); }

  /* Loading */
  .loading-overlay {
    display: none;
    text-align: center;
    padding: 48px;
  }

  .loading-overlay.show { display: block; }

  .scanner {
    width: 80px;
    height: 80px;
    border: 3px solid var(--border);
    border-top-color: var(--azure-light);
    border-radius: 50%;
    margin: 0 auto 20px;
    animation: spin 0.8s linear infinite;
  }

  @keyframes spin { to { transform: rotate(360deg); } }

  .loading-text {
    font-family: 'Space Mono', monospace;
    font-size: 14px;
    color: var(--azure-light);
  }

  .loading-steps {
    margin-top: 16px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    align-items: center;
  }

  .loading-step {
    font-size: 12px;
    color: var(--muted);
    opacity: 0;
    transition: opacity 0.4s;
  }

  .loading-step.visible { opacity: 1; color: var(--ok); }

  /* Results */
  #results { display: none; }

  .results-header {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 28px;
    margin-bottom: 20px;
  }

  .results-title {
    font-size: 20px;
    font-weight: 800;
    margin-bottom: 6px;
  }

  .results-subtitle {
    color: var(--muted);
    font-size: 14px;
    margin-bottom: 24px;
  }

  .savings-breakdown {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 12px;
  }

  .savings-card {
    border-radius: 10px;
    padding: 16px;
    text-align: center;
    border: 1px solid;
  }

  .savings-card.critical {
    background: rgba(255,59,59,0.08);
    border-color: rgba(255,59,59,0.3);
  }

  .savings-card.warning {
    background: rgba(255,184,0,0.08);
    border-color: rgba(255,184,0,0.3);
  }

  .savings-card.info {
    background: rgba(0,120,212,0.08);
    border-color: rgba(0,120,212,0.3);
  }

  .savings-card.total {
    background: rgba(0,200,81,0.08);
    border-color: rgba(0,200,81,0.3);
  }

  .savings-amount {
    font-family: 'Space Mono', monospace;
    font-size: 24px;
    font-weight: 700;
  }

  .savings-card.critical .savings-amount { color: var(--danger); }
  .savings-card.warning .savings-amount { color: var(--warn); }
  .savings-card.info .savings-amount { color: var(--azure-light); }
  .savings-card.total .savings-amount { color: var(--ok); }

  .savings-label {
    font-size: 11px;
    color: var(--muted);
    margin-top: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .leaks-container {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 24px;
  }

  .leak-card {
    background: var(--surface);
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid var(--border);
    animation: slideIn 0.3s ease;
  }

  .leak-header {
    display: flex;
    align-items: center;
    padding: 16px 20px;
    gap: 14px;
    cursor: pointer;
    transition: background 0.2s;
  }

  .leak-header:hover { background: var(--surface2); }

  .severity-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .critical .severity-dot { background: var(--danger); box-shadow: 0 0 8px var(--danger); }
  .warning .severity-dot { background: var(--warn); box-shadow: 0 0 8px var(--warn); }
  .info .severity-dot { background: var(--azure-light); box-shadow: 0 0 8px var(--azure-light); }

  .leak-info { flex: 1 }

  .leak-title {
    font-size: 15px;
    font-weight: 700;
    margin-bottom: 2px;
  }

  .leak-resource {
    font-size: 12px;
    font-family: 'Space Mono', monospace;
    color: var(--muted);
  }

  .leak-savings {
    font-family: 'Space Mono', monospace;
    font-size: 16px;
    font-weight: 700;
  }

  .critical .leak-savings { color: var(--danger); }
  .warning .leak-savings { color: var(--warn); }
  .info .leak-savings { color: var(--azure-light); }

  .severity-badge {
    padding: 3px 10px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-family: 'Space Mono', monospace;
  }

  .critical .severity-badge { background: rgba(255,59,59,0.15); color: var(--danger); }
  .warning .severity-badge { background: rgba(255,184,0,0.15); color: var(--warn); }
  .info .severity-badge { background: rgba(0,120,212,0.15); color: var(--azure-light); }

  .leak-body {
    padding: 0 20px 16px 44px;
    display: none;
  }

  .leak-body.open { display: block; }

  .leak-description {
    font-size: 13px;
    color: #9BB8D4;
    line-height: 1.6;
    margin-bottom: 12px;
  }

  .fix-steps {
    background: var(--bg);
    border-radius: 8px;
    padding: 14px;
    border: 1px solid var(--border);
  }

  .fix-title {
    font-size: 11px;
    font-family: 'Space Mono', monospace;
    color: var(--ok);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 10px;
  }

  .fix-step {
    display: flex;
    gap: 10px;
    font-size: 13px;
    color: var(--muted);
    margin-bottom: 6px;
    line-height: 1.5;
  }

  .fix-step:last-child { margin-bottom: 0; }

  .step-num {
    color: var(--azure-light);
    font-family: 'Space Mono', monospace;
    font-size: 11px;
    flex-shrink: 0;
    margin-top: 2px;
  }

  /* Priority Action */
  .priority-section {
    background: linear-gradient(135deg, rgba(255,59,59,0.1), rgba(255,184,0,0.05));
    border: 1px solid rgba(255,59,59,0.3);
    border-radius: 16px;
    padding: 24px;
    margin-bottom: 20px;
  }

  .priority-title {
    font-size: 16px;
    font-weight: 800;
    color: #FF7070;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .action-list { display: flex; flex-direction: column; gap: 10px; }

  .action-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px 14px;
    background: rgba(0,0,0,0.3);
    border-radius: 8px;
  }

  .action-rank {
    background: var(--danger);
    color: white;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 700;
    flex-shrink: 0;
    font-family: 'Space Mono', monospace;
  }

  .action-text { font-size: 13px; color: var(--text); line-height: 1.5; }
  .action-save { font-weight: 700; color: var(--ok); }

  /* Export */
  .export-row {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
  }

  .export-btn {
    flex: 1;
    min-width: 140px;
    padding: 12px 20px;
    border-radius: 10px;
    font-family: 'Syne', sans-serif;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
    border: 1px solid;
  }

  .export-btn.primary {
    background: var(--azure);
    border-color: var(--azure);
    color: white;
  }

  .export-btn.secondary {
    background: transparent;
    border-color: var(--border);
    color: var(--text);
  }

  .export-btn:hover { opacity: 0.85; transform: translateY(-1px); }

  /* Tips */
  .tips-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 24px;
    margin-bottom: 32px;
  }

  .tips-title {
    font-size: 16px;
    font-weight: 800;
    margin-bottom: 16px;
    color: var(--azure-light);
  }

  .tips-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 12px; }

  .tip-item {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px;
  }

  .tip-icon { font-size: 20px; margin-bottom: 8px; }
  .tip-text { font-size: 13px; color: var(--muted); line-height: 1.5; }
  .tip-text strong { color: var(--text); }

  .reset-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: transparent;
    border: 1px solid var(--border);
    color: var(--muted);
    padding: 10px 20px;
    border-radius: 8px;
    font-family: 'Syne', sans-serif;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
    margin-bottom: 32px;
  }

  .reset-btn:hover { border-color: var(--azure); color: var(--azure-light); }

  /* Footer */
  footer {
    border-top: 1px solid var(--border);
    padding: 24px 0;
    text-align: center;
    color: var(--muted);
    font-size: 12px;
    font-family: 'Space Mono', monospace;
  }

  footer a { color: var(--azure-light); text-decoration: none; }

  /* CTA Banner */
  .cta-banner {
    position: relative;
    background: var(--surface);
    border: 1px solid rgba(0,120,212,0.5);
    border-radius: 20px;
    padding: 36px;
    margin-bottom: 24px;
    overflow: hidden;
    box-shadow: 0 0 60px rgba(0,120,212,0.12), 0 20px 40px rgba(0,0,0,0.4);
  }
  .cta-glow {
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at 80% 50%, rgba(0,120,212,0.08) 0%, transparent 60%);
    pointer-events: none;
  }
  .cta-banner::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--azure), var(--azure-light), var(--azure));
    background-size: 200% 100%;
    animation: shimmer 2.5s linear infinite;
  }
  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }
  .cta-content {
    display: flex;
    gap: 32px;
    align-items: center;
    position: relative;
    z-index: 1;
  }
  .cta-left { flex: 1; }
  .cta-eyebrow {
    font-size: 11px;
    font-family: 'Space Mono', monospace;
    color: var(--azure-light);
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-bottom: 10px;
  }
  .cta-title {
    font-size: 28px;
    font-weight: 800;
    letter-spacing: -0.5px;
    margin-bottom: 10px;
    line-height: 1.1;
  }
  .cta-subtitle {
    font-size: 14px;
    color: #9BB8D4;
    line-height: 1.6;
    max-width: 420px;
    margin-bottom: 18px;
  }
  .cta-bullets {
    display: flex;
    flex-wrap: wrap;
    gap: 8px 20px;
  }
  .cta-bullet { font-size: 13px; color: var(--text); font-weight: 600; }
  .cta-right {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    flex-shrink: 0;
    min-width: 220px;
  }
  .cta-savings-preview {
    background: rgba(0,0,0,0.3);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px 24px;
    text-align: center;
    width: 100%;
  }
  .cta-savings-label {
    font-size: 11px;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 6px;
    font-family: 'Space Mono', monospace;
  }
  .cta-savings-num {
    font-size: 32px;
    font-weight: 800;
    font-family: 'Space Mono', monospace;
    color: var(--ok);
    line-height: 1;
  }
  .cta-savings-annual {
    font-size: 13px;
    color: var(--muted);
    margin-top: 4px;
    font-family: 'Space Mono', monospace;
  }
  .cta-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    width: 100%;
    padding: 16px 24px;
    background: linear-gradient(135deg, #0078D4, #005A9E);
    border: none;
    border-radius: 12px;
    color: white;
    font-family: 'Syne', sans-serif;
    font-size: 15px;
    font-weight: 800;
    cursor: pointer;
    text-decoration: none;
    text-align: center;
    transition: all 0.2s;
    box-shadow: 0 4px 20px rgba(0,120,212,0.4);
    animation: pulse-btn 2.5s ease-in-out infinite;
  }
  @keyframes pulse-btn {
    0%, 100% { box-shadow: 0 4px 20px rgba(0,120,212,0.4); }
    50% { box-shadow: 0 4px 32px rgba(0,120,212,0.7), 0 0 0 4px rgba(0,120,212,0.1); }
  }
  .cta-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 32px rgba(0,120,212,0.6);
    animation: none;
  }
  .cta-btn-icon { font-size: 18px; }
  .cta-email-display {
    font-size: 12px;
    font-family: 'Space Mono', monospace;
    color: var(--muted);
  }
  @media (max-width: 700px) {
    .cta-content { flex-direction: column; }
    .cta-right { width: 100%; }
    .cta-title { font-size: 22px; }
  }

  /* Responsive */
  @media (max-width: 600px) {
    .form-row { grid-template-columns: 1fr; }
    .hero h1 { font-size: 32px; }
    .stat-row { gap: 10px; }
  }
</style>
</head>
<body>
<div class="glow-orb"></div>

<div class="container">
  <header>
    <div class="logo">
      <div class="logo-icon">üí∏</div>
      <div class="logo-text">Azure<span>Leak</span></div>
    </div>
    <div class="badge">Free Tool</div>
  </header>

  <div class="hero">
    <div class="hero-label">‚ö† Cost Waste Detector</div>
    <h1>Your Azure Bill Is<br><span class="highlight">Leaking Money</span></h1>
    <p>Paste your Azure resource list or add manually. Get instant leak detection with exact savings ‚Äî no login, no signup, no BS.</p>
    <div class="stat-row">
      <div class="stat">
        <div class="stat-num">~32%</div>
        <div class="stat-label">Avg Azure Waste</div>
      </div>
      <div class="stat">
        <div class="stat-num">$18K</div>
        <div class="stat-label">Avg Annual Leak</div>
      </div>
      <div class="stat">
        <div class="stat-num">9</div>
        <div class="stat-label">Leak Patterns</div>
      </div>
    </div>
  </div>

  <div class="tool-card" id="inputSection">
    <div class="tool-tabs">
      <button class="tab-btn active" onclick="switchTab('manual')">üîß Manual Entry</button>
      <button class="tab-btn" onclick="switchTab('paste')">üìã Paste JSON/CSV</button>
      <button class="tab-btn" onclick="switchTab('demo')">üöÄ Load Demo</button>
    </div>

    <div id="tab-manual" class="tab-content active">
      <p class="section-label">Add your Azure resources</p>
      <div class="manual-form">
        <div class="form-row">
          <div class="form-group">
            <label>Resource Name</label>
            <input type="text" id="resName" placeholder="e.g. prod-vm-01" />
          </div>
          <div class="form-group">
            <label>Resource Type</label>
            <select id="resType">
              <option value="">Select type...</option>
              <option value="vm">Virtual Machine</option>
              <option value="disk">Managed Disk</option>
              <option value="pip">Public IP Address</option>
              <option value="lb">Load Balancer</option>
              <option value="snapshot">Disk Snapshot</option>
              <option value="storage">Storage Account</option>
              <option value="sql">SQL Database</option>
              <option value="aks">AKS Cluster</option>
              <option value="appservice">App Service Plan</option>
              <option value="vnet-gateway">VNet Gateway</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Monthly Cost (USD)</label>
            <input type="number" id="resCost" placeholder="e.g. 250" min="0" />
          </div>
          <div class="form-group">
            <label>Status / Usage</label>
            <select id="resStatus">
              <option value="running">Running / Active</option>
              <option value="stopped">Stopped (Deallocated)</option>
              <option value="unused">Unused / Orphaned</option>
              <option value="low">Low Utilization (&lt;10%)</option>
              <option value="oversized">Likely Oversized</option>
              <option value="old">Old Snapshot / Backup</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Region</label>
            <select id="resRegion">
              <option value="eastus">East US</option>
              <option value="westus">West US</option>
              <option value="westeurope">West Europe</option>
              <option value="northeurope">North Europe</option>
              <option value="uksouth">UK South</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label>SKU / Size (optional)</label>
            <input type="text" id="resSku" placeholder="e.g. Standard_D4s_v3" />
          </div>
        </div>
        <button class="add-resource-btn" onclick="addResource()">+ Add Resource</button>
        <div class="resources-list" id="resourcesList"></div>
      </div>
    </div>

    <div id="tab-paste" class="tab-content">
      <p class="section-label">Paste Azure resource data (JSON, CSV, or plain text)</p>
      <textarea id="pasteInput" placeholder='Paste your Azure resource export here. Examples:

CSV format:
Name,Type,Cost,Status
prod-vm-01,VirtualMachine,450,Running
orphan-disk-02,ManagedDisk,80,Unattached
old-snapshot-05,Snapshot,15,3yearsold

JSON format:
[{"name":"prod-vm","type":"VirtualMachine","cost":450,"status":"stopped"}]

Or just plain text describing your resources.'></textarea>
    </div>

    <div id="tab-demo" class="tab-content">
      <p class="section-label">Demo: Real-world Azure waste scenario</p>
      <div style="background:var(--bg);border:1px solid var(--border);border-radius:10px;padding:16px;font-family:'Space Mono',monospace;font-size:12px;color:var(--muted);line-height:1.8">
        <span style="color:var(--ok)">// Contoso Corp Azure Resources (demo)</span><br>
        prod-vm-01 ‚Üí Standard_D8s_v3 ‚Üí $520/mo ‚Üí CPU avg 4%<br>
        dev-vm-02 ‚Üí Standard_D4s_v3 ‚Üí $260/mo ‚Üí STOPPED<br>
        orphan-disk-001 ‚Üí Premium SSD 1TB ‚Üí $136/mo ‚Üí UNATTACHED<br>
        orphan-disk-002 ‚Üí Standard SSD 512GB ‚Üí $48/mo ‚Üí UNATTACHED<br>
        old-snapshot-jan23 ‚Üí Snapshot ‚Üí $18/mo ‚Üí 2 years old<br>
        prod-pip-03 ‚Üí Public IP ‚Üí $5/mo ‚Üí NOT ASSOCIATED<br>
        dev-lb-01 ‚Üí Basic LB ‚Üí $18/mo ‚Üí no backends<br>
        sql-dev-db ‚Üí S4 tier ‚Üí $300/mo ‚Üí 2 connections/day<br>
        appplan-dev ‚Üí P3v2 ‚Üí $420/mo ‚Üí dev environment<br>
        Total visible: <span style="color:var(--warn)">$1,725/mo</span>
      </div>
      <p style="font-size:13px;color:var(--muted);margin-top:12px">Click "Analyze Leaks" to see how much of this is wasted.</p>
    </div>

    <div style="padding: 0 28px 28px;">
      <button class="analyze-btn" onclick="analyzeLeaks()">
        üîç Analyze Leaks Now
      </button>
    </div>
  </div>

  <!-- Loading -->
  <div class="loading-overlay" id="loadingSection">
    <div class="scanner"></div>
    <div class="loading-text">Scanning for cost leaks...</div>
    <div class="loading-steps">
      <div class="loading-step" id="step1">‚úì Detecting orphaned resources</div>
      <div class="loading-step" id="step2">‚úì Checking stopped VMs still billing</div>
      <div class="loading-step" id="step3">‚úì Analyzing over-provisioned SKUs</div>
      <div class="loading-step" id="step4">‚úì Scanning old snapshots & backups</div>
      <div class="loading-step" id="step5">‚úì Calculating total savings potential</div>
    </div>
  </div>

  <!-- Results -->
  <div id="results">
    <button class="reset-btn" onclick="resetTool()">‚Üê Start New Analysis</button>

    <div class="results-header">
      <div class="results-title" id="resultsTitle">Analysis Complete ‚Äî Leaks Found</div>
      <div class="results-subtitle" id="resultsSubtitle">Here's where your money is going and exactly how to stop it.</div>
      <div class="savings-breakdown" id="savingsBreakdown"></div>
    </div>

    <div class="priority-section">
      <div class="priority-title">üî• Top Priority Actions</div>
      <div class="action-list" id="priorityActions"></div>
    </div>

    <div class="leaks-container" id="leaksContainer"></div>

    <div class="tips-section">
      <div class="tips-title">üí° Azure Cost Hygiene Tips</div>
      <div class="tips-grid">
        <div class="tip-item">
          <div class="tip-icon">‚è∞</div>
          <div class="tip-text"><strong>Auto-shutdown dev VMs</strong> ‚Äî Set 7 PM shutdown on all non-prod VMs. Saves 60% on dev costs.</div>
        </div>
        <div class="tip-item">
          <div class="tip-icon">üìä</div>
          <div class="tip-text"><strong>Enable Cost Alerts</strong> ‚Äî Set budget alerts at 80% and 100% in Cost Management to catch spikes early.</div>
        </div>
        <div class="tip-item">
          <div class="tip-icon">üè∑Ô∏è</div>
          <div class="tip-text"><strong>Tag everything</strong> ‚Äî Resources without Owner/Project/Env tags are invisible waste. Enforce tagging policies.</div>
        </div>
        <div class="tip-item">
          <div class="tip-icon">üí∞</div>
          <div class="tip-text"><strong>Reserved Instances</strong> ‚Äî For stable workloads, 1-year RIs save ~40%, 3-year ~60% vs pay-as-you-go.</div>
        </div>
        <div class="tip-item">
          <div class="tip-icon">üîÑ</div>
          <div class="tip-text"><strong>Right-size monthly</strong> ‚Äî Check Azure Advisor recommendations every month. Most orgs are 2-3x oversized.</div>
        </div>
        <div class="tip-item">
          <div class="tip-icon">üóëÔ∏è</div>
          <div class="tip-text"><strong>Snapshot lifecycle</strong> ‚Äî Auto-delete snapshots older than 30 days unless tagged as archival. Saves hundreds.</div>
        </div>
      </div>
    </div>

    <!-- CTA Banner -->
    <div class="cta-banner">
      <div class="cta-glow"></div>
      <div class="cta-content">
        <div class="cta-left">
          <div class="cta-eyebrow">üíº Azure Certified Engineer ‚Äî Available Now</div>
          <div class="cta-title">Want me to fix this for you?</div>
          <div class="cta-subtitle">I'll personally audit your Azure environment, implement the fixes, and set up cost guardrails ‚Äî so you never leak money again.</div>
          <div class="cta-bullets">
            <div class="cta-bullet">‚úÖ AZ-104 & AZ-305 Certified</div>
            <div class="cta-bullet">‚úÖ Fixed in 24‚Äì48 hours</div>
            <div class="cta-bullet">‚úÖ Full audit report included</div>
            <div class="cta-bullet">‚úÖ No fix = No charge</div>
          </div>
        </div>
        <div class="cta-right">
          <div class="cta-savings-preview" id="ctaSavingsPreview">
            <div class="cta-savings-label">Your potential savings</div>
            <div class="cta-savings-num" id="ctaSavingsNum">$0/mo</div>
            <div class="cta-savings-annual" id="ctaSavingsAnnual">$0/year</div>
          </div>
          <a class="cta-btn" href="" id="ctaEmailBtn" target="_blank">
            <span class="cta-btn-icon">‚úâ</span>
            Email Me to Fix This
          </a>
          <div class="cta-email-display"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5c2f35323829363d373d30303d1c3b313d3530723f3331">[email&#160;protected]</a></div>
        </div>
      </div>
    </div>

    <div class="export-row">
      <button class="export-btn primary" onclick="exportReport()">üìÑ Export PDF Report</button>
      <button class="export-btn secondary" onclick="copyReport()">üìã Copy as Text</button>
      <button class="export-btn secondary" onclick="resetTool()">üîÑ New Analysis</button>
    </div>
  </div>

  <div class="tips-section" id="howItWorks" style="margin-top:32px">
    <div class="tips-title">How AzureLeak Works</div>
    <div class="tips-grid">
      <div class="tip-item">
        <div class="tip-icon">1Ô∏è‚É£</div>
        <div class="tip-text"><strong>Add your resources</strong> manually or paste an export from Azure Portal ‚Üí Cost Management ‚Üí Resource view.</div>
      </div>
      <div class="tip-item">
        <div class="tip-icon">2Ô∏è‚É£</div>
        <div class="tip-text"><strong>Instant analysis</strong> against 9 known Azure cost leak patterns ‚Äî orphans, oversizing, idle resources, and more.</div>
      </div>
      <div class="tip-item">
        <div class="tip-icon">3Ô∏è‚É£</div>
        <div class="tip-text"><strong>Get exact savings</strong> with step-by-step fix instructions. Export a PDF report to share with your team or client.</div>
      </div>
    </div>
  </div>

  <footer>
    <div style="margin-bottom:8px">
      <strong style="color:#E8F4FD;font-size:13px">¬© 2026 Sinduja Kalla. All Rights Reserved.</strong>
    </div>
    <div>
      AzureLeak‚Ñ¢ is an original tool created, designed and owned exclusively by <strong style="color:#50E6FF">Sinduja Kalla</strong>
      &nbsp;|&nbsp; Unauthorised copying, redistribution or commercial use is strictly prohibited
      &nbsp;|&nbsp; 100% client-side, no data stored
      &nbsp;|&nbsp; <a href="mailto:sindujakalla@gmail.com">sindujakalla@gmail.com</a>
    </div>
  </footer>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
  let resources = [];
  let activeTab = 'manual';

  function switchTab(tab) {
    activeTab = tab;
    document.querySelectorAll('.tab-btn').forEach((btn, i) => {
      btn.classList.toggle('active', ['manual','paste','demo'][i] === tab);
    });
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    document.getElementById('tab-' + tab).classList.add('active');
  }

  function addResource() {
    const name = document.getElementById('resName').value.trim();
    const type = document.getElementById('resType').value;
    const cost = parseFloat(document.getElementById('resCost').value);
    const status = document.getElementById('resStatus').value;
    const region = document.getElementById('resRegion').value;
    const sku = document.getElementById('resSku').value.trim();

    if (!name || !type || isNaN(cost)) {
      alert('Please fill in Name, Type, and Monthly Cost.');
      return;
    }

    const res = { id: Date.now(), name, type, cost, status, region, sku };
    resources.push(res);
    renderResourcesList();

    document.getElementById('resName').value = '';
    document.getElementById('resCost').value = '';
    document.getElementById('resSku').value = '';
    document.getElementById('resType').value = '';
  }

  function removeResource(id) {
    resources = resources.filter(r => r.id !== id);
    renderResourcesList();
  }

  function renderResourcesList() {
    const list = document.getElementById('resourcesList');
    if (resources.length === 0) { list.innerHTML = ''; return; }

    list.innerHTML = resources.map(r => `
      <div class="resource-item">
        <div class="resource-info">
          <div class="resource-name">${r.name}</div>
          <div class="resource-meta">${r.type.toUpperCase()} ¬∑ ${r.region} ¬∑ ${r.sku || 'No SKU'} ¬∑ ${r.status}</div>
        </div>
        <div style="display:flex;align-items:center;gap:4px">
          <div class="resource-cost">$${r.cost}/mo</div>
          <button class="remove-btn" onclick="removeResource(${r.id})">‚úï</button>
        </div>
      </div>
    `).join('');
  }

  const LEAK_RULES = [
    {
      id: 'stopped-vm',
      check: r => r.type === 'vm' && r.status === 'stopped',
      title: r => `Stopped VM still billing: ${r.name}`,
      severity: 'critical',
      savings: r => r.cost * 0.9,
      description: r => `"${r.name}" is a stopped (deallocated) VM. Azure still charges for the OS disk, reserved IP, and NIC. A deallocated VM should cost near $0 if you don't need it ‚Äî or be deleted if truly unused.`,
      fixes: [
        'Go to Azure Portal ‚Üí Virtual Machines ‚Üí select the VM',
        'If not needed: Click Delete. Make sure to check "Delete OS Disk" and "Delete NIC".',
        'If needed occasionally: Keep stopped but set an auto-shutdown schedule for active hours only.',
        'If needed regularly: Convert to a B-series burstable VM to reduce idle cost by 40-60%.'
      ]
    },
    {
      id: 'orphan-disk',
      check: r => r.type === 'disk' && (r.status === 'unused' || r.status === 'stopped'),
      title: r => `Orphaned disk: ${r.name}`,
      severity: 'critical',
      savings: r => r.cost,
      description: r => `"${r.name}" is a managed disk not attached to any VM. Azure charges full price for unattached disks. This is one of the most common and silent Azure cost leaks.`,
      fixes: [
        'Portal ‚Üí Disks ‚Üí filter by "Unattached"',
        'Snapshot it first if you might need data: az disk snapshot create ...',
        'Delete the disk: az disk delete --name ' + r.name + ' --resource-group <rg>',
        'Consider using Azure Disk Lifecycle policies to automate orphan cleanup.'
      ]
    },
    {
      id: 'orphan-pip',
      check: r => r.type === 'pip' && (r.status === 'unused' || r.status === 'stopped'),
      title: r => `Unassociated Public IP: ${r.name}`,
      severity: 'warning',
      savings: r => r.cost,
      description: r => `"${r.name}" is a static Public IP not assigned to any resource. Azure charges $5-7/month per idle static IP. Small individually, but orphaned IPs accumulate across subscriptions.`,
      fixes: [
        'Portal ‚Üí Public IP Addresses ‚Üí check "Associated to" column',
        'Filter for IPs with no association',
        'Delete unused IPs: az network public-ip delete --name ' + r.name,
        'Enable Azure Policy to alert on unassociated IPs automatically.'
      ]
    },
    {
      id: 'old-snapshot',
      check: r => r.type === 'snapshot' && r.status === 'old',
      title: r => `Old snapshot accumulating cost: ${r.name}`,
      severity: 'warning',
      savings: r => r.cost * 0.8,
      description: r => `"${r.name}" appears to be an old snapshot that's no longer needed. Snapshots are incremental but still incur storage costs. Organizations often forget about snapshots from migrations or old VMs.`,
      fixes: [
        'Portal ‚Üí Snapshots ‚Üí sort by Date Created',
        'Delete snapshots older than your retention policy (typically 30-90 days)',
        'Create an Azure Automation runbook to auto-delete snapshots older than 30 days',
        'Use Azure Backup policies instead of manual snapshots for better lifecycle management.'
      ]
    },
    {
      id: 'oversized-vm',
      check: r => r.type === 'vm' && (r.status === 'low' || r.status === 'oversized'),
      title: r => `Oversized VM ‚Äî right-sizing opportunity: ${r.name}`,
      severity: 'warning',
      savings: r => r.cost * 0.45,
      description: r => `"${r.name}" shows low CPU/memory utilization. Azure Advisor commonly flags this ‚Äî a VM running at <10% CPU is likely 2-4x oversized. Right-sizing to a smaller SKU can cut costs by 40-60%.`,
      fixes: [
        'Check Azure Advisor ‚Üí Cost tab for specific right-sizing recommendation',
        'Review 30-day CPU/memory metrics in Azure Monitor',
        'Resize via Portal ‚Üí VM ‚Üí Size ‚Üí select the recommended smaller SKU',
        'For production: resize during maintenance window (requires VM restart)',
        'Consider B-series burstable VMs for workloads with variable CPU needs.'
      ]
    },
    {
      id: 'idle-lb',
      check: r => r.type === 'lb' && (r.status === 'unused' || r.status === 'low'),
      title: r => `Idle Load Balancer: ${r.name}`,
      severity: 'warning',
      savings: r => r.cost,
      description: r => `"${r.name}" has no or very few backend instances. An idle load balancer still charges for rules and data processing. If it has no backends, it's pure waste.`,
      fixes: [
        'Portal ‚Üí Load Balancers ‚Üí check Backend Pools',
        'If no backends: Delete the LB entirely',
        'If dev/test: Use Azure Application Gateway or a single VM with NSG instead',
        'Ensure you also delete associated frontend IPs and DNS entries.'
      ]
    },
    {
      id: 'oversized-sql',
      check: r => r.type === 'sql' && (r.status === 'low' || r.status === 'oversized'),
      title: r => `Oversized SQL Database: ${r.name}`,
      severity: 'critical',
      savings: r => r.cost * 0.55,
      description: r => `"${r.name}" is likely over-provisioned for its actual workload. SQL Database is one of Azure's most expensive services per unit, and it's frequently set at too high a tier during setup and never adjusted.`,
      fixes: [
        'Portal ‚Üí SQL Databases ‚Üí select DB ‚Üí Compute + Storage',
        'Review DTU consumption metrics over the past 30 days',
        'Scale down to a lower service tier (e.g., S4 ‚Üí S1) if DTU avg < 25%',
        'Consider Serverless tier for databases with intermittent usage',
        'For dev/test: use Basic tier ($5/mo) instead of Standard.'
      ]
    },
    {
      id: 'oversized-appplan',
      check: r => r.type === 'appservice' && (r.status === 'oversized' || r.status === 'low'),
      title: r => `Oversized App Service Plan: ${r.name}`,
      severity: 'warning',
      savings: r => r.cost * 0.5,
      description: r => `"${r.name}" may be running on a Premium plan when a Standard or even Free/Shared tier would suffice for the workload ‚Äî especially for dev/test environments.`,
      fixes: [
        'Portal ‚Üí App Service Plans ‚Üí check CPU/Memory metrics',
        'Scale down: P3v2 ‚Üí P1v2 saves ~65%; P1v2 ‚Üí S1 saves another 30%',
        'For dev/test: Use Free (F1) or Shared (D1) tier',
        'Enable auto-scale to reduce during off-hours instead of constant high tier.'
      ]
    },
    {
      id: 'vnet-gateway',
      check: r => r.type === 'vnet-gateway' && r.status === 'unused',
      title: r => `Unused VNet Gateway: ${r.name}`,
      severity: 'critical',
      savings: r => r.cost,
      description: r => `"${r.name}" is a VNet Gateway (VPN/ExpressRoute) that appears unused. These can cost $100-$500/month and are often forgotten after migrations or when VPN connections are decommissioned.`,
      fixes: [
        'Portal ‚Üí Virtual Network Gateways ‚Üí check active connections',
        'If no active connections: Delete the gateway and associated Local Network Gateway',
        'Also delete the associated Public IP address',
        'Consider Azure Virtual WAN for cost-effective multi-site connectivity.'
      ]
    }
  ];

  function detectLeaks(resList) {
    const leaks = [];
    for (const res of resList) {
      for (const rule of LEAK_RULES) {
        if (rule.check(res)) {
          leaks.push({
            id: rule.id + '-' + res.id,
            severity: rule.severity,
            title: rule.title(res),
            resource: res.name,
            savings: Math.round(rule.savings(res)),
            monthlyCost: res.cost,
            description: rule.description(res),
            fixes: rule.fixes
          });
        }
      }
    }
    return leaks.sort((a, b) => {
      const sev = { critical: 0, warning: 1, info: 2 };
      return sev[a.severity] - sev[b.severity] || b.savings - a.savings;
    });
  }

  function parsePasteInput(text) {
    const parsed = [];
    // Try JSON
    try {
      const json = JSON.parse(text);
      if (Array.isArray(json)) {
        return json.map((r, i) => ({
          id: i + 1,
          name: r.name || r.Name || 'Resource-' + i,
          type: detectType(r.type || r.Type || ''),
          cost: parseFloat(r.cost || r.Cost || r.monthly_cost || 0),
          status: detectStatus(r.status || r.Status || ''),
          region: r.region || r.Region || 'unknown',
          sku: r.sku || r.SKU || r.size || ''
        }));
      }
    } catch(e) {}

    // Try CSV / line-by-line
    const lines = text.trim().split('\n').filter(l => l.trim());
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      if (line.toLowerCase().includes('name') && line.toLowerCase().includes('type')) continue; // header
      const parts = line.split(/[,\t|‚Üí]+/).map(p => p.trim());
      if (parts.length >= 2) {
        const nameGuess = parts[0];
        const typeGuess = detectType(parts[1] || '');
        const costGuess = parseFloat(parts.find(p => /^\$?\d+\.?\d*$/.test(p.replace('$','').replace('/mo',''))) || '0');
        const statusRaw = parts.find(p => /stop|unused|orphan|running|idle|low|old|unattach/i.test(p)) || 'running';

        if (nameGuess && typeGuess) {
          parsed.push({
            id: i + 100,
            name: nameGuess,
            type: typeGuess,
            cost: costGuess,
            status: detectStatus(statusRaw),
            region: 'unknown',
            sku: parts.find(p => /Standard_|Basic_|Premium_|P\d|S\d|B\d/.test(p)) || ''
          });
        }
      }
    }
    return parsed;
  }

  function detectType(s) {
    s = s.toLowerCase();
    if (/virtual.?machine|vm/.test(s)) return 'vm';
    if (/disk|managed.?disk/.test(s)) return 'disk';
    if (/snapshot/.test(s)) return 'snapshot';
    if (/public.?ip|pip/.test(s)) return 'pip';
    if (/load.?bal|lb/.test(s)) return 'lb';
    if (/sql/.test(s)) return 'sql';
    if (/app.?service|appservice/.test(s)) return 'appservice';
    if (/storage/.test(s)) return 'storage';
    if (/gateway|vnet/.test(s)) return 'vnet-gateway';
    if (/aks|kubernetes/.test(s)) return 'aks';
    return 'vm'; // default
  }

  function detectStatus(s) {
    s = s.toLowerCase();
    if (/stop|deallocat/.test(s)) return 'stopped';
    if (/unattach|orphan|unatten/.test(s)) return 'unused';
    if (/low|idle|underutil/.test(s)) return 'low';
    if (/old|expir|stale|year/.test(s)) return 'old';
    if (/oversize|oversiz/.test(s)) return 'oversized';
    return 'running';
  }

  // Demo data
  const DEMO_RESOURCES = [
    { id: 1, name: 'prod-vm-01', type: 'vm', cost: 520, status: 'low', region: 'eastus', sku: 'Standard_D8s_v3' },
    { id: 2, name: 'dev-vm-02', type: 'vm', cost: 260, status: 'stopped', region: 'eastus', sku: 'Standard_D4s_v3' },
    { id: 3, name: 'orphan-disk-001', type: 'disk', cost: 136, status: 'unused', region: 'eastus', sku: 'Premium SSD 1TB' },
    { id: 4, name: 'orphan-disk-002', type: 'disk', cost: 48, status: 'unused', region: 'eastus', sku: 'Standard SSD 512GB' },
    { id: 5, name: 'old-snapshot-jan23', type: 'snapshot', cost: 18, status: 'old', region: 'eastus', sku: '' },
    { id: 6, name: 'prod-pip-03', type: 'pip', cost: 5, status: 'unused', region: 'eastus', sku: '' },
    { id: 7, name: 'dev-lb-01', type: 'lb', cost: 18, status: 'unused', region: 'eastus', sku: '' },
    { id: 8, name: 'sql-dev-db', type: 'sql', cost: 300, status: 'low', region: 'eastus', sku: 'S4' },
    { id: 9, name: 'appplan-dev', type: 'appservice', cost: 420, status: 'oversized', region: 'eastus', sku: 'P3v2' },
  ];

  function analyzeLeaks() {
    let resourcesToAnalyze;

    if (activeTab === 'manual') {
      if (resources.length === 0) {
        alert('Please add at least one resource first, or use the Demo tab.');
        return;
      }
      resourcesToAnalyze = resources;
    } else if (activeTab === 'paste') {
      const text = document.getElementById('pasteInput').value.trim();
      if (!text) {
        alert('Please paste your resource data first.');
        return;
      }
      resourcesToAnalyze = parsePasteInput(text);
      if (resourcesToAnalyze.length === 0) {
        alert('Could not parse resources. Try the Manual Entry tab.');
        return;
      }
    } else {
      resourcesToAnalyze = DEMO_RESOURCES;
    }

    // Show loading
    document.getElementById('inputSection').style.display = 'none';
    document.getElementById('howItWorks').style.display = 'none';
    document.getElementById('loadingSection').classList.add('show');

    const steps = ['step1','step2','step3','step4','step5'];
    steps.forEach((s, i) => {
      setTimeout(() => {
        document.getElementById(s).classList.add('visible');
      }, 400 + i * 500);
    });

    setTimeout(() => {
      document.getElementById('loadingSection').classList.remove('show');
      showResults(resourcesToAnalyze);
    }, 3200);
  }

  function showResults(resList) {
    const leaks = detectLeaks(resList);
    const totalMonthly = resList.reduce((s, r) => s + r.cost, 0);
    const totalSavings = leaks.reduce((s, l) => s + l.savings, 0);
    const criticalSavings = leaks.filter(l => l.severity === 'critical').reduce((s, l) => s + l.savings, 0);
    const warnSavings = leaks.filter(l => l.severity === 'warning').reduce((s, l) => s + l.savings, 0);
    const wastePercent = totalMonthly > 0 ? Math.round((totalSavings / totalMonthly) * 100) : 0;

    // Title
    document.getElementById('resultsTitle').textContent =
      leaks.length === 0 ? '‚úÖ No major leaks found!' : `üö® ${leaks.length} Leak${leaks.length > 1 ? 's' : ''} Found ‚Äî $${totalSavings.toLocaleString()}/mo wasted`;
    document.getElementById('resultsSubtitle').textContent =
      `Analyzed ${resList.length} resources. ${wastePercent}% of your spend ($${totalMonthly.toLocaleString()}/mo total) is being wasted.`;

    // Savings breakdown
    document.getElementById('savingsBreakdown').innerHTML = `
      <div class="savings-card critical">
        <div class="savings-amount">$${criticalSavings.toLocaleString()}</div>
        <div class="savings-label">Critical Waste/mo</div>
      </div>
      <div class="savings-card warning">
        <div class="savings-amount">$${warnSavings.toLocaleString()}</div>
        <div class="savings-label">Optimizable/mo</div>
      </div>
      <div class="savings-card info">
        <div class="savings-amount">${wastePercent}%</div>
        <div class="savings-label">Waste Rate</div>
      </div>
      <div class="savings-card total">
        <div class="savings-amount">$${(totalSavings * 12).toLocaleString()}</div>
        <div class="savings-label">Annual Savings</div>
      </div>
    `;

    // Priority actions
    const top3 = leaks.slice(0, 3);
    document.getElementById('priorityActions').innerHTML = top3.map((l, i) => `
      <div class="action-item">
        <div class="action-rank">${i+1}</div>
        <div class="action-text">
          ${l.title} ‚Äî <span class="action-save">saves $${l.savings.toLocaleString()}/mo</span>. ${l.fixes[0]}
        </div>
      </div>
    `).join('') || '<div style="color:var(--ok);font-size:14px">‚úÖ No critical actions needed right now.</div>';

    // Leak cards
    if (leaks.length === 0) {
      document.getElementById('leaksContainer').innerHTML = `
        <div style="text-align:center;padding:48px;background:var(--surface);border:1px solid var(--border);border-radius:16px;color:var(--ok)">
          <div style="font-size:48px;margin-bottom:16px">‚úÖ</div>
          <div style="font-size:18px;font-weight:800">No waste patterns detected</div>
          <div style="color:var(--muted);margin-top:8px;font-size:14px">Your resources look well-managed. Check back after adding more resources.</div>
        </div>`;
    } else {
      document.getElementById('leaksContainer').innerHTML = leaks.map(l => `
        <div class="leak-card ${l.severity}">
          <div class="leak-header" onclick="toggleLeak('${l.id}')">
            <div class="severity-dot"></div>
            <div class="leak-info">
              <div class="leak-title">${l.title}</div>
              <div class="leak-resource">${l.resource} ¬∑ $${l.monthlyCost}/mo current</div>
            </div>
            <div style="display:flex;align-items:center;gap:12px;flex-shrink:0">
              <div class="leak-savings">-$${l.savings}/mo</div>
              <div class="severity-badge">${l.severity}</div>
            </div>
          </div>
          <div class="leak-body" id="leak-${l.id}">
            <p class="leak-description">${l.description}</p>
            <div class="fix-steps">
              <div class="fix-title">üìã How to Fix</div>
              ${l.fixes.map((f, i) => `
                <div class="fix-step">
                  <span class="step-num">0${i+1}.</span>
                  <span>${f}</span>
                </div>
              `).join('')}
            </div>
          </div>
        </div>
      `).join('');
    }

    window._lastLeaks = leaks;
    window._lastResources = resList;
    window._totalSavings = totalSavings;

    // Update CTA banner with dynamic savings + pre-filled email
    document.getElementById('ctaSavingsNum').textContent = '$' + totalSavings.toLocaleString() + '/mo';
    document.getElementById('ctaSavingsAnnual').textContent = '$' + (totalSavings * 12).toLocaleString() + '/year potential';
    const subject = encodeURIComponent('Azure Cost Audit ‚Äî $' + totalSavings + '/mo in savings found');
    const body = encodeURIComponent('Hi Sinduja,\n\nI ran my Azure resources through AzureLeak and found $' + totalSavings + '/month ($' + (totalSavings * 12) + '/year) in potential savings across ' + leaks.length + ' issue(s).\n\nI\'d love your help fixing these. Can we set up a quick call?\n\nThanks!');
    document.getElementById('ctaEmailBtn').href = 'mailto:sindujakalla@gmail.com?subject=' + subject + '&body=' + body;

    document.getElementById('results').style.display = 'block';
    document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
  }

  function toggleLeak(id) {
    const body = document.getElementById('leak-' + id);
    body.classList.toggle('open');
  }

  function resetTool() {
    document.getElementById('inputSection').style.display = 'block';
    document.getElementById('howItWorks').style.display = 'block';
    document.getElementById('results').style.display = 'none';
    resources = [];
    renderResourcesList();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function copyReport() {
    if (!window._lastLeaks) return;
    const lines = [
      'AzureLeak Cost Analysis Report',
      '==============================',
      `Date: ${new Date().toLocaleDateString()}`,
      `Total Potential Savings: $${window._totalSavings}/month`,
      '',
      'LEAKS FOUND:',
      ...window._lastLeaks.map((l, i) => 
        `${i+1}. [${l.severity.toUpperCase()}] ${l.title} ‚Äî Save $${l.savings}/mo\n   Fix: ${l.fixes[0]}`
      ),
      '',
      'Generated by AzureLeak ‚Äî Free Azure Cost Audit Tool'
    ];
    navigator.clipboard.writeText(lines.join('\n')).then(() => {
      alert('Report copied to clipboard!');
    });
  }

  function exportReport() {
    if (!window._lastLeaks) return;
    const content = `
      <html><head><style>
        body { font-family: Arial, sans-serif; padding: 40px; color: #333; }
        h1 { color: #0078D4; } h2 { color: #555; margin-top: 30px; }
        .leak { margin: 15px 0; padding: 15px; border-left: 4px solid; background: #f9f9f9; }
        .critical { border-color: #FF3B3B; } .warning { border-color: #FFB800; }
        .savings { font-size: 18px; font-weight: bold; color: #0078D4; }
        .fix { background: #f0f0f0; padding: 10px; margin-top: 8px; font-size: 13px; }
        .total { background: #e8f4fd; padding: 20px; border-radius: 8px; margin: 20px 0; }
      </style></head><body>
      <h1>üîç AzureLeak Cost Analysis Report</h1>
      <p>Generated: ${new Date().toLocaleString()}</p>
      <div class="total">
        <strong>Total Resources Analyzed:</strong> ${window._lastResources.length}<br>
        <strong>Total Monthly Savings Available:</strong> <span class="savings">$${window._totalSavings.toLocaleString()}/month</span><br>
        <strong>Estimated Annual Savings:</strong> $${(window._totalSavings * 12).toLocaleString()}/year
      </div>
      <h2>Cost Leaks Found</h2>
      ${window._lastLeaks.map(l => `
        <div class="leak ${l.severity}">
          <strong>${l.title}</strong> <br>
          Severity: ${l.severity.toUpperCase()} | Potential Savings: $${l.savings}/month<br>
          <p>${l.description}</p>
          <div class="fix"><strong>How to fix:</strong><br>${l.fixes.map((f,i) => `${i+1}. ${f}`).join('<br>')}</div>
        </div>
      `).join('')}
      <hr><p style="color:#999;font-size:12px">Generated by AzureLeak ‚Äî Free Azure Cost Audit Tool</p>
      </body></html>`;

    const blob = new Blob
